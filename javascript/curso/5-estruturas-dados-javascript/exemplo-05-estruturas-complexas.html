<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo 5: Estruturas de Dados Complexas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        .exemplo {
            background: #f9f9f9;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
            border-radius: 4px;
        }
        .resultado {
            background: #e8f5e9;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèóÔ∏è Exemplo 5: Estruturas de Dados Complexas</h1>
        <p>Abra o console do navegador (F12) para ver os resultados!</p>

        <div id="resultado"></div>
    </div>

    <script>
        console.log('=== EXEMPLO 5: ESTRUTURAS DE DADOS COMPLEXAS ===\n');

        // Sistema de Biblioteca usando m√∫ltiplas estruturas
        console.log('========== SISTEMA DE BIBLIOTECA ==========\n');

        // 1. Array de livros (lista ordenada)
        const livros = [
            { id: 1, titulo: 'Aprendendo JavaScript', autor: 'Jo√£o Silva', genero: 'T√©cnico' },
            { id: 2, titulo: 'Dom Casmurro', autor: 'Machado de Assis', genero: 'Literatura' },
            { id: 3, titulo: 'O Guia do Mochileiro', autor: 'Douglas Adams', genero: 'Fic√ß√£o' },
            { id: 4, titulo: 'JavaScript: O Guia Definitivo', autor: 'David Flanagan', genero: 'T√©cnico' },
            { id: 5, titulo: '1984', autor: 'George Orwell', genero: 'Fic√ß√£o' }
        ];

        console.log('1. ARRAY DE LIVROS (lista ordenada):');
        console.log('Total de livros:', livros.length);
        livros.forEach((livro, index) => {
            console.log(`  ${index + 1}. ${livro.titulo} - ${livro.autor}`);
        });
        console.log('\n');

        // 2. Map para busca r√°pida por ID
        const livrosPorId = new Map();
        livros.forEach(livro => {
            livrosPorId.set(livro.id, livro);
        });

        console.log('2. MAP PARA BUSCA R√ÅPIDA POR ID:');
        console.log('Tamanho do Map:', livrosPorId.size);
        
        // Fun√ß√£o para buscar livro por ID
        function buscarLivroPorId(id) {
            return livrosPorId.get(id);
        }
        
        const livroEncontrado = buscarLivroPorId(3);
        console.log('Livro com ID 3:', livroEncontrado);
        console.log('\n');

        // 3. Set para autores √∫nicos
        const autores = new Set();
        livros.forEach(livro => {
            autores.add(livro.autor);
        });

        console.log('3. SET PARA AUTORES √öNICOS:');
        console.log('Total de autores √∫nicos:', autores.size);
        console.log('Autores:', Array.from(autores).join(', '));
        console.log('\n');

        // 4. Set para g√™neros √∫nicos
        const generos = new Set(livros.map(livro => livro.genero));
        console.log('4. SET PARA G√äNEROS √öNICOS:');
        console.log('G√™neros dispon√≠veis:', Array.from(generos).join(', '));
        console.log('\n');

        // 5. Fun√ß√µes de busca e filtro
        console.log('5. FUN√á√ïES DE BUSCA E FILTRO:');
        
        // Buscar livros por autor
        function buscarLivrosPorAutor(autor) {
            return livros.filter(livro => livro.autor === autor);
        }
        
        const livrosJoao = buscarLivrosPorAutor('Jo√£o Silva');
        console.log('Livros de Jo√£o Silva:', livrosJoao.length);
        livrosJoao.forEach(livro => console.log(`  - ${livro.titulo}`));
        console.log('\n');

        // Buscar livros por g√™nero
        function buscarLivrosPorGenero(genero) {
            return livros.filter(livro => livro.genero === genero);
        }
        
        const livrosFiccao = buscarLivrosPorGenero('Fic√ß√£o');
        console.log('Livros de Fic√ß√£o:', livrosFiccao.length);
        livrosFiccao.forEach(livro => console.log(`  - ${livro.titulo}`));
        console.log('\n');

        // 6. Adicionar novo livro (atualizar todas as estruturas)
        function adicionarLivro(novoLivro) {
            // Adicionar ao array
            livros.push(novoLivro);
            
            // Adicionar ao Map
            livrosPorId.set(novoLivro.id, novoLivro);
            
            // Adicionar autor ao Set
            autores.add(novoLivro.autor);
            
            // Adicionar g√™nero ao Set
            generos.add(novoLivro.genero);
            
            console.log(`Livro "${novoLivro.titulo}" adicionado com sucesso!`);
        }

        console.log('6. ADICIONANDO NOVO LIVRO:');
        adicionarLivro({
            id: 6,
            titulo: 'Clean Code',
            autor: 'Robert C. Martin',
            genero: 'T√©cnico'
        });
        console.log('Total de livros agora:', livros.length);
        console.log('Total de autores agora:', autores.size);
        console.log('\n');

        // 7. Converter para JSON
        console.log('7. CONVERTENDO PARA JSON:');
        const dadosBiblioteca = {
            totalLivros: livros.length,
            livros: livros,
            autores: Array.from(autores),
            generos: Array.from(generos),
            dataAtualizacao: new Date().toISOString()
        };
        
        const jsonBiblioteca = JSON.stringify(dadosBiblioteca, null, 2);
        console.log('JSON da biblioteca (primeiras 200 caracteres):');
        console.log(jsonBiblioteca.substring(0, 200) + '...');
        console.log('\n');

        // 8. Recuperar de JSON
        console.log('8. RECUPERANDO DE JSON:');
        const dadosRecuperados = JSON.parse(jsonBiblioteca);
        console.log('Dados recuperados:');
        console.log('  Total de livros:', dadosRecuperados.totalLivros);
        console.log('  Autores:', dadosRecuperados.autores.join(', '));
        console.log('\n');

        // 9. Estat√≠sticas da biblioteca
        console.log('9. ESTAT√çSTICAS DA BIBLIOTECA:');
        
        // Livros por g√™nero
        const livrosPorGenero = {};
        livros.forEach(livro => {
            if (!livrosPorGenero[livro.genero]) {
                livrosPorGenero[livro.genero] = 0;
            }
            livrosPorGenero[livro.genero]++;
        });
        
        console.log('Livros por g√™nero:');
        Object.entries(livrosPorGenero).forEach(([genero, quantidade]) => {
            console.log(`  ${genero}: ${quantidade} livro(s)`);
        });
        console.log('\n');

        // Autor com mais livros
        const livrosPorAutor = {};
        livros.forEach(livro => {
            if (!livrosPorAutor[livro.autor]) {
                livrosPorAutor[livro.autor] = 0;
            }
            livrosPorAutor[livro.autor]++;
        });
        
        const autorComMaisLivros = Object.entries(livrosPorAutor)
            .sort((a, b) => b[1] - a[1])[0];
        console.log('Autor com mais livros:');
        console.log(`  ${autorComMaisLivros[0]}: ${autorComMaisLivros[1]} livro(s)`);
        console.log('\n');

        console.log('=== FIM DO EXEMPLO ===');

        // Exibir no HTML
        const resultadoDiv = document.getElementById('resultado');
        resultadoDiv.innerHTML = `
            <div class="exemplo">
                <h3>üìö Sistema de Biblioteca</h3>
                <p><strong>Total de livros:</strong> ${livros.length}</p>
                <p><strong>Autores √∫nicos:</strong> ${autores.size}</p>
                <p><strong>G√™neros:</strong> ${Array.from(generos).join(', ')}</p>
            </div>
            
            <div class="exemplo">
                <h3>üìñ Lista de Livros</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>T√≠tulo</th>
                            <th>Autor</th>
                            <th>G√™nero</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${livros.map(livro => `
                            <tr>
                                <td>${livro.id}</td>
                                <td>${livro.titulo}</td>
                                <td>${livro.autor}</td>
                                <td>${livro.genero}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            </div>
            
            <div class="exemplo">
                <h3>üìä Estat√≠sticas</h3>
                <p><strong>Livros por g√™nero:</strong></p>
                <ul>
                    ${Object.entries(livrosPorGenero).map(([genero, qtd]) => 
                        `<li>${genero}: ${qtd} livro(s)</li>`
                    ).join('')}
                </ul>
                <p><strong>Autor com mais livros:</strong> ${autorComMaisLivros[0]} (${autorComMaisLivros[1]} livro(s))</p>
            </div>
            
            <div class="exemplo">
                <h3>üîç Busca R√°pida</h3>
                <p>Use <code>buscarLivroPorId(id)</code> para buscar por ID (usa Map - O(1))</p>
                <p>Use <code>buscarLivrosPorAutor(autor)</code> para buscar por autor (usa Array.filter)</p>
                <p>Use <code>buscarLivrosPorGenero(genero)</code> para buscar por g√™nero</p>
            </div>
            
            <p style="margin-top: 20px;"><strong>üí° Dica:</strong> Abra o console (F12) para ver todos os exemplos detalhados e testar as fun√ß√µes!</p>
        `;
    </script>
</body>
</html>


